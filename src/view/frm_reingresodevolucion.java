/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package view;

import com.itextpdf.text.DocumentException;
import controlador.ctrl_devolucion;
import formatos_pdf.pdf_recepcion;
import java.io.IOException;
import java.sql.SQLException;
import javax.swing.JOptionPane;
import model.class_proveedor;

/**
 *
 * @author ruben
 */
public class frm_reingresodevolucion extends javax.swing.JFrame {

    private Integer nro_documentoreingresado=0;
    
    public frm_reingresodevolucion() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jScrollPane2 = new javax.swing.JScrollPane();
        tabla_devolucion = new javax.swing.JTable();
        jPanel7 = new javax.swing.JPanel();
        lbl_encabezadoalmacen2 = new javax.swing.JLabel();
        lbl_imagentimaca2 = new javax.swing.JLabel();
        bot_reiniciar = new javax.swing.JButton();
        bot_cerrar = new javax.swing.JButton();
        lbl_usuario = new javax.swing.JLabel();
        lbl_nombres = new javax.swing.JLabel();
        jPanel3 = new javax.swing.JPanel();
        lbl_devolucion = new javax.swing.JLabel();
        lbl_ordencompra = new javax.swing.JLabel();
        txt_ordencompra = new javax.swing.JTextField();
        panel_devolucion = new javax.swing.JPanel();
        label_nromaterial = new javax.swing.JLabel();
        lbl_descripcionmaterial = new javax.swing.JLabel();
        lbl_umb = new javax.swing.JLabel();
        jLabel19 = new javax.swing.JLabel();
        jLabel20 = new javax.swing.JLabel();
        jLabel21 = new javax.swing.JLabel();
        txt_cantidad = new javax.swing.JTextField();
        jLabel23 = new javax.swing.JLabel();
        lbl_cantidad = new javax.swing.JLabel();
        panel_foto = new javax.swing.JPanel();
        lbl_foto = new javax.swing.JLabel();
        jLabel24 = new javax.swing.JLabel();
        jLabel25 = new javax.swing.JLabel();
        lbl_motivo = new javax.swing.JLabel();
        lbl_umbpendiente = new javax.swing.JLabel();
        lbl_cantidadpendiente = new javax.swing.JLabel();
        jLabel26 = new javax.swing.JLabel();
        lbl_cantidadreingresada = new javax.swing.JLabel();
        lbl_umbreingreso = new javax.swing.JLabel();
        bot_contabilizar = new javax.swing.JButton();
        panel_proveedor = new javax.swing.JPanel();
        lbl_proveedor = new javax.swing.JLabel();
        lbl_rif = new javax.swing.JLabel();
        lbl_direccionfiscal = new javax.swing.JLabel();
        lbl_contactotelefonico = new javax.swing.JLabel();
        lbl_personacontacto = new javax.swing.JLabel();
        jLabel9 = new javax.swing.JLabel();
        jLabel10 = new javax.swing.JLabel();
        jLabel11 = new javax.swing.JLabel();
        jLabel12 = new javax.swing.JLabel();
        jLabel13 = new javax.swing.JLabel();
        lbl_tipo = new javax.swing.JLabel();
        jLabel14 = new javax.swing.JLabel();
        lbl_correoelectronico = new javax.swing.JLabel();
        jLabel15 = new javax.swing.JLabel();
        bot_documento = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.DO_NOTHING_ON_CLOSE);
        getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        tabla_devolucion.setFont(new java.awt.Font("Tahoma", 1, 10)); // NOI18N
        tabla_devolucion.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "id", "id_material", "oc", "NRO MATERIAL", "DESCRIPCION", "CANT DEVUELTA", "CANT REINGRESADA", "UMB", "MOTIVO", "FECHA ENTRADA", "DOC ENTRADA", "FECHA DEVUELTA", "PROYECTO", "ORDEN DE COMPRA", "ALMACEN", "UBICACION", "USUARIO"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        tabla_devolucion.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tabla_devolucionMouseClicked(evt);
            }
        });
        jScrollPane2.setViewportView(tabla_devolucion);

        getContentPane().add(jScrollPane2, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 260, 1310, 100));

        jPanel7.setBackground(new java.awt.Color(153, 153, 153));
        jPanel7.setLayout(null);

        lbl_encabezadoalmacen2.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        lbl_encabezadoalmacen2.setForeground(new java.awt.Color(255, 255, 255));
        lbl_encabezadoalmacen2.setText("REINGRESO MATERIAL");
        jPanel7.add(lbl_encabezadoalmacen2);
        lbl_encabezadoalmacen2.setBounds(250, 10, 200, 29);

        lbl_imagentimaca2.setIcon(new javax.swing.ImageIcon(getClass().getResource("/imagenes/TIMACA.png"))); // NOI18N
        jPanel7.add(lbl_imagentimaca2);
        lbl_imagentimaca2.setBounds(10, 0, 230, 60);

        bot_reiniciar.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        bot_reiniciar.setForeground(new java.awt.Color(255, 255, 255));
        bot_reiniciar.setIcon(new javax.swing.ImageIcon(getClass().getResource("/imagenes/reiniciar.png"))); // NOI18N
        bot_reiniciar.setText("Reiniciar");
        bot_reiniciar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bot_reiniciarActionPerformed(evt);
            }
        });
        jPanel7.add(bot_reiniciar);
        bot_reiniciar.setBounds(1113, 20, 130, 33);
        complemento.DisableBorderButton(bot_reiniciar);

        bot_cerrar.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        bot_cerrar.setForeground(new java.awt.Color(255, 255, 255));
        bot_cerrar.setIcon(new javax.swing.ImageIcon(getClass().getResource("/imagenes/cerrar.png"))); // NOI18N
        bot_cerrar.setText("Cerrar");
        bot_cerrar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bot_cerrarActionPerformed(evt);
            }
        });
        jPanel7.add(bot_cerrar);
        bot_cerrar.setBounds(1250, 20, 110, 30);
        complemento.DisableBorderButton(bot_cerrar);

        lbl_usuario.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        lbl_usuario.setForeground(new java.awt.Color(255, 255, 255));
        lbl_usuario.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        lbl_usuario.setText("USUARIO");
        jPanel7.add(lbl_usuario);
        lbl_usuario.setBounds(860, 10, 240, 17);

        lbl_nombres.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        lbl_nombres.setForeground(new java.awt.Color(255, 255, 255));
        lbl_nombres.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        lbl_nombres.setText("NOMBRES");
        lbl_nombres.setVerticalAlignment(javax.swing.SwingConstants.TOP);
        jPanel7.add(lbl_nombres);
        lbl_nombres.setBounds(862, 30, 240, 17);

        jPanel3.setBackground(new java.awt.Color(255, 255, 255));
        jPanel7.add(jPanel3);
        jPanel3.setBounds(1110, 10, 1, 40);

        getContentPane().add(jPanel7, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 1430, 60));

        lbl_devolucion.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        lbl_devolucion.setForeground(new java.awt.Color(0, 0, 255));
        lbl_devolucion.setText("DETALLES DEVOLUCIÓN");
        getContentPane().add(lbl_devolucion, new org.netbeans.lib.awtextra.AbsoluteConstraints(520, 240, -1, 20));

        lbl_ordencompra.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        lbl_ordencompra.setText("NRO DE ORDEN DE COMPRA");
        getContentPane().add(lbl_ordencompra, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 70, -1, -1));

        txt_ordencompra.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        txt_ordencompra.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                txt_ordencompraKeyReleased(evt);
            }
        });
        getContentPane().add(txt_ordencompra, new org.netbeans.lib.awtextra.AbsoluteConstraints(200, 70, 130, -1));

        panel_devolucion.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        panel_devolucion.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        label_nromaterial.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        panel_devolucion.add(label_nromaterial, new org.netbeans.lib.awtextra.AbsoluteConstraints(190, 20, 150, 20));

        lbl_descripcionmaterial.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        panel_devolucion.add(lbl_descripcionmaterial, new org.netbeans.lib.awtextra.AbsoluteConstraints(190, 60, 440, 20));

        lbl_umb.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        panel_devolucion.add(lbl_umb, new org.netbeans.lib.awtextra.AbsoluteConstraints(240, 120, 40, 20));

        jLabel19.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel19.setText("NÚMERO DE MATERIAL");
        panel_devolucion.add(jLabel19, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 20, -1, -1));

        jLabel20.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel20.setText("DESCRIPCIÓN MATERIAL");
        panel_devolucion.add(jLabel20, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 60, -1, -1));

        jLabel21.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel21.setText("MOTIVO");
        panel_devolucion.add(jLabel21, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 90, -1, -1));

        txt_cantidad.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        txt_cantidad.setEnabled(false);
        txt_cantidad.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                txt_cantidadKeyReleased(evt);
            }
        });
        panel_devolucion.add(txt_cantidad, new org.netbeans.lib.awtextra.AbsoluteConstraints(190, 210, 70, -1));

        jLabel23.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel23.setText("CANTIDAD A REINGRESAR");
        panel_devolucion.add(jLabel23, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 210, -1, -1));

        lbl_cantidad.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        panel_devolucion.add(lbl_cantidad, new org.netbeans.lib.awtextra.AbsoluteConstraints(190, 120, 40, 20));

        panel_foto.setBackground(new java.awt.Color(255, 255, 255));
        panel_foto.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "FOTO REFERENCIAL", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 1, 14))); // NOI18N
        panel_foto.setForeground(new java.awt.Color(0, 0, 255));

        lbl_foto.setBackground(new java.awt.Color(255, 255, 255));

        javax.swing.GroupLayout panel_fotoLayout = new javax.swing.GroupLayout(panel_foto);
        panel_foto.setLayout(panel_fotoLayout);
        panel_fotoLayout.setHorizontalGroup(
            panel_fotoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(lbl_foto, javax.swing.GroupLayout.DEFAULT_SIZE, 268, Short.MAX_VALUE)
        );
        panel_fotoLayout.setVerticalGroup(
            panel_fotoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(lbl_foto, javax.swing.GroupLayout.DEFAULT_SIZE, 164, Short.MAX_VALUE)
        );

        panel_devolucion.add(panel_foto, new org.netbeans.lib.awtextra.AbsoluteConstraints(640, 10, 280, 190));

        jLabel24.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel24.setText("CANTIDAD DEVUELTA");
        panel_devolucion.add(jLabel24, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 120, -1, -1));

        jLabel25.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel25.setText("CANTIDAD PENDIENTE");
        panel_devolucion.add(jLabel25, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 180, -1, -1));

        lbl_motivo.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        panel_devolucion.add(lbl_motivo, new org.netbeans.lib.awtextra.AbsoluteConstraints(190, 90, 290, 20));

        lbl_umbpendiente.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        panel_devolucion.add(lbl_umbpendiente, new org.netbeans.lib.awtextra.AbsoluteConstraints(240, 180, 40, 20));

        lbl_cantidadpendiente.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        panel_devolucion.add(lbl_cantidadpendiente, new org.netbeans.lib.awtextra.AbsoluteConstraints(190, 180, 40, 20));

        jLabel26.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel26.setText("CANTIDAD REINGRESADA");
        panel_devolucion.add(jLabel26, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 150, -1, -1));

        lbl_cantidadreingresada.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        panel_devolucion.add(lbl_cantidadreingresada, new org.netbeans.lib.awtextra.AbsoluteConstraints(190, 150, 40, 20));

        lbl_umbreingreso.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        panel_devolucion.add(lbl_umbreingreso, new org.netbeans.lib.awtextra.AbsoluteConstraints(240, 150, 40, 20));

        getContentPane().add(panel_devolucion, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 380, 1300, 240));

        bot_contabilizar.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        bot_contabilizar.setIcon(new javax.swing.ImageIcon(getClass().getResource("/imagenes/contabilizar.png"))); // NOI18N
        bot_contabilizar.setText("CONTABILIZAR");
        bot_contabilizar.setEnabled(false);
        bot_contabilizar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bot_contabilizarActionPerformed(evt);
            }
        });
        getContentPane().add(bot_contabilizar, new org.netbeans.lib.awtextra.AbsoluteConstraints(420, 630, 180, 40));

        panel_proveedor.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        panel_proveedor.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        lbl_proveedor.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        panel_proveedor.add(lbl_proveedor, new org.netbeans.lib.awtextra.AbsoluteConstraints(110, 10, 230, 20));

        lbl_rif.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        panel_proveedor.add(lbl_rif, new org.netbeans.lib.awtextra.AbsoluteConstraints(110, 50, 200, 20));

        lbl_direccionfiscal.setFont(new java.awt.Font("Tahoma", 1, 10)); // NOI18N
        panel_proveedor.add(lbl_direccionfiscal, new org.netbeans.lib.awtextra.AbsoluteConstraints(530, 90, 770, 20));

        lbl_contactotelefonico.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        panel_proveedor.add(lbl_contactotelefonico, new org.netbeans.lib.awtextra.AbsoluteConstraints(530, 50, 270, 20));

        lbl_personacontacto.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        panel_proveedor.add(lbl_personacontacto, new org.netbeans.lib.awtextra.AbsoluteConstraints(520, 10, 270, 20));

        jLabel9.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel9.setText("PROVEEDOR");
        panel_proveedor.add(jLabel9, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 10, -1, -1));

        jLabel10.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel10.setText("RIF");
        panel_proveedor.add(jLabel10, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 50, -1, -1));

        jLabel11.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel11.setText("DIRECCIÓN FISCAL");
        panel_proveedor.add(jLabel11, new org.netbeans.lib.awtextra.AbsoluteConstraints(370, 90, -1, -1));

        jLabel12.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel12.setText("PERSONA CONTACTO");
        panel_proveedor.add(jLabel12, new org.netbeans.lib.awtextra.AbsoluteConstraints(370, 10, -1, -1));

        jLabel13.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel13.setText("CONTACTO TELEFÓNICO");
        panel_proveedor.add(jLabel13, new org.netbeans.lib.awtextra.AbsoluteConstraints(370, 50, -1, -1));

        lbl_tipo.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        panel_proveedor.add(lbl_tipo, new org.netbeans.lib.awtextra.AbsoluteConstraints(110, 90, 220, 20));

        jLabel14.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel14.setText("TIPO");
        panel_proveedor.add(jLabel14, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 90, -1, -1));

        lbl_correoelectronico.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        panel_proveedor.add(lbl_correoelectronico, new org.netbeans.lib.awtextra.AbsoluteConstraints(970, 10, 310, 20));

        jLabel15.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel15.setText("CORREO ELECTRÓNICO");
        panel_proveedor.add(jLabel15, new org.netbeans.lib.awtextra.AbsoluteConstraints(820, 10, -1, -1));

        getContentPane().add(panel_proveedor, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 120, 1310, 120));

        bot_documento.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        bot_documento.setIcon(new javax.swing.ImageIcon(getClass().getResource("/imagenes/documento.png"))); // NOI18N
        bot_documento.setText("VER DOCUMENTO");
        bot_documento.setEnabled(false);
        bot_documento.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bot_documentoActionPerformed(evt);
            }
        });
        getContentPane().add(bot_documento, new org.netbeans.lib.awtextra.AbsoluteConstraints(740, 630, 200, 40));

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void bot_reiniciarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bot_reiniciarActionPerformed
        frm_reingresodevolucion frm = new frm_reingresodevolucion();
        frm.setVisible(true);
        this.dispose();
    }//GEN-LAST:event_bot_reiniciarActionPerformed

    private void bot_cerrarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bot_cerrarActionPerformed
        Integer resp = JOptionPane.showConfirmDialog(null, "ESTÁ SEGURO EN SALIR?");
        if (resp.equals(0)){
            this.dispose();
        }
    }//GEN-LAST:event_bot_cerrarActionPerformed

    private void txt_ordencompraKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txt_ordencompraKeyReleased
        ctrl_devolucion devolucion = null;
        class_proveedor modelo_proveedor = null;

        if ( ( (evt.getKeyCode() >= 48 ) && (evt.getKeyCode() <= 57 ) ) || ( (evt.getKeyCode() >= 37 ) && (evt.getKeyCode() <= 40 ) ) || ((evt.getKeyCode() >= 96 ) && (evt.getKeyCode() <= 105 )) || (evt.getKeyCode() == 144) || (evt.getKeyCode() == 127) || (evt.getKeyCode() == 8)  || (evt.getKeyCode() == 10)){

            if(!txt_ordencompra.getText().trim().equals("")){
                devolucion = new ctrl_devolucion(
                    0, //id_devolucion,    
                    0, //fk_material,
                    0, // fk_proyecto,
                    0, // fk_almacen,
                    0, // fk_ubicacion,
                    0, // fk_motivo,
                    0, // fk_proveedor,
                    0, // fk_usuario,
                    "", // codigo_umb,
                    "", // descripcionmotivo,
                    0, // posicion,
                    0, // nro_documentoentrada,
                    0, // nro_documentodevolucion,
                    Integer.parseInt(txt_ordencompra.getText().trim()), // orden_compra,
                    "", // fecha_entrada,
                    0.0, // cantidad_devuelta,
                    0.0, // cantidad_reingresada,
                    "", // fecha_reingreso,
                    "", // fecha_devuelta,
                    "", // foto,
                    true // estatus
                );

                try {
                    modelo_proveedor = devolucion.consultar_ordendecompra_proveedor();

                    if (modelo_proveedor.getStatus()){
                        lbl_proveedor.setText(modelo_proveedor.getNombre());
                        lbl_rif.setText(modelo_proveedor.getRif());
                        lbl_tipo.setText(modelo_proveedor.getTipo());
                        lbl_personacontacto.setText(modelo_proveedor.getPersonacontacto());
                        lbl_contactotelefonico.setText(modelo_proveedor.getTelefono1());
                        lbl_direccionfiscal.setText(modelo_proveedor.getDireccion());
                        lbl_correoelectronico.setText(modelo_proveedor.getCorreoelectronico());

                        devolucion.consultar_detalle_devolucion(tabla_devolucion);
                    }
                    else{

                    }

                } catch (SQLException | ArrayIndexOutOfBoundsException ex) {
                    System.out.println(ex.getMessage());
                }

            }

        }
        else{
            if (evt.getKeyCode() == 27){

                bot_reiniciar.doClick();

            }
            else{
                JOptionPane.showMessageDialog(null, "CARÁCTER NO VÁLIDO. SOLO NÚMEROS (1..9)", "SISTIMACA - DEVOLUCIÓN", JOptionPane.ERROR_MESSAGE,null);
                txt_ordencompra.setText("");
            }
        }
    }//GEN-LAST:event_txt_ordencompraKeyReleased

    private void txt_cantidadKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txt_cantidadKeyReleased

        if ( ( (evt.getKeyCode() >= 48 ) && (evt.getKeyCode() <= 57 ) ) || ( (evt.getKeyCode() >= 37 ) && (evt.getKeyCode() <= 40 ) ) || ((evt.getKeyCode() >= 96 ) && (evt.getKeyCode() <= 105 )) || (evt.getKeyCode() == 144) || (evt.getKeyCode() == 127) || (evt.getKeyCode() == 8)  || (evt.getKeyCode() == 10)){
            bot_contabilizar.setEnabled(true);
        }
        else{
            if (evt.getKeyCode() == 27){

                bot_reiniciar.doClick();

            }
            else{
                JOptionPane.showMessageDialog(null, "CARÁCTER NO VÁLIDO. SOLO NÚMEROS (1..9)", "SISTIMACA - DEVOLUCIÓN", JOptionPane.ERROR_MESSAGE,null);
                txt_cantidad.setText("");
                bot_contabilizar.setEnabled(false);
            }
        }
    }//GEN-LAST:event_txt_cantidadKeyReleased

    private void bot_contabilizarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bot_contabilizarActionPerformed
        ctrl_devolucion devolucion = null;
        String fecha_reingreso;
        Integer fila;

        fila = tabla_devolucion.getSelectedRow();

        fecha_reingreso = funciones.fecha_bd_usuario(funciones.getfechacalendario(), 2);

        if (!label_nromaterial.getText().trim().equals("") && !txt_cantidad.getText().trim().equals("")){

            devolucion = new ctrl_devolucion(
                Integer.parseInt(tabla_devolucion.getValueAt(fila,0).toString()), //id_devolucion,    
                Integer.parseInt(tabla_devolucion.getValueAt(fila,1).toString()), //fk_material,
                0, // fk_proyecto,
                0, // fk_almacen,
                0, // fk_ubicacion,
                0, // fk_motivo,
                0, // fk_proveedor,
                0, // fk_usuario,
                "", // codigo_umb,
                "", // descripcionmotivo,
                0, // posicion,
                Integer.parseInt(tabla_devolucion.getValueAt(fila,10).toString()), // nro_documentoentrada,
                0, // nro_documentodevolucion,
                Integer.parseInt(tabla_devolucion.getValueAt(fila,2).toString()), // orden_compra,
                "", // fecha_entrada,
                0.0, // cantidad_devuelta,
                Double.parseDouble(txt_cantidad.getText().trim()), // cantidad_reingresada,
                fecha_reingreso, // fecha_reingreso,
                "", // fecha_devuelta,
                "", // foto,
                true // estatus
            );
            nro_documentoreingresado = devolucion.actualizar_posicion();
            bot_contabilizar.setEnabled(false);
            label_nromaterial.setText("");
            lbl_descripcionmaterial.setText("");
            lbl_cantidad.setText("");
            lbl_foto.setIcon(null);
            lbl_umb.setText("");
            txt_cantidad.setText("");

            if (nro_documentoreingresado > 0){
                bot_documento.setEnabled(true);
            }    
            
            try {
                devolucion.consultar_detalle_devolucion(tabla_devolucion);
            } catch (SQLException ex) {
                JOptionPane.showMessageDialog(null,"ERROR EN LA CONSULTA. " + ex.getMessage());
            }
            
        }
        else{
            JOptionPane.showMessageDialog(null, "DATOS INCOMPLETOS");

        }
    }//GEN-LAST:event_bot_contabilizarActionPerformed

    private void tabla_devolucionMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tabla_devolucionMouseClicked
        Integer fila;
        fila = tabla_devolucion.getSelectedRow();
        label_nromaterial.setText(tabla_devolucion.getValueAt(fila, 3).toString());
        lbl_descripcionmaterial.setText(tabla_devolucion.getValueAt(fila, 4).toString());
        lbl_cantidad.setText(tabla_devolucion.getValueAt(fila, 5).toString());
        lbl_cantidadreingresada.setText(tabla_devolucion.getValueAt(fila, 6).toString());
        lbl_umb.setText(tabla_devolucion.getValueAt(fila, 7).toString());
        lbl_umbreingreso.setText(tabla_devolucion.getValueAt(fila, 7).toString());
        lbl_umbpendiente.setText(tabla_devolucion.getValueAt(fila, 7).toString());
        lbl_cantidadpendiente.setText(String.valueOf(Double.parseDouble(tabla_devolucion.getValueAt(fila, 5).toString()) -  Double.parseDouble(tabla_devolucion.getValueAt(fila, 6).toString())));
        lbl_motivo.setText(tabla_devolucion.getValueAt(fila, 8).toString());
        txt_cantidad.setEnabled(true);
    }//GEN-LAST:event_tabla_devolucionMouseClicked

    private void bot_documentoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bot_documentoActionPerformed
            try{
                pdf_recepcion.dato("\\\\192.168.0.3\\dist\\Documentos_SisTimaca",nro_documentoreingresado,"Express");
            } catch (DocumentException | IOException | SQLException ex) {
                JOptionPane.showMessageDialog(null,"ERROR EN LA GENERACIÓN DEL DOCUMENTO. " + ex.getMessage());
            }
       
    }//GEN-LAST:event_bot_documentoActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(frm_reingresodevolucion.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(frm_reingresodevolucion.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(frm_reingresodevolucion.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(frm_reingresodevolucion.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new frm_reingresodevolucion().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton bot_cerrar;
    private javax.swing.JButton bot_contabilizar;
    protected static javax.swing.JButton bot_documento;
    private javax.swing.JButton bot_reiniciar;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel13;
    private javax.swing.JLabel jLabel14;
    private javax.swing.JLabel jLabel15;
    private javax.swing.JLabel jLabel19;
    private javax.swing.JLabel jLabel20;
    private javax.swing.JLabel jLabel21;
    private javax.swing.JLabel jLabel23;
    private javax.swing.JLabel jLabel24;
    private javax.swing.JLabel jLabel25;
    private javax.swing.JLabel jLabel26;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel7;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JLabel label_nromaterial;
    private javax.swing.JLabel lbl_cantidad;
    private javax.swing.JLabel lbl_cantidadpendiente;
    private javax.swing.JLabel lbl_cantidadreingresada;
    private javax.swing.JLabel lbl_contactotelefonico;
    private javax.swing.JLabel lbl_correoelectronico;
    private javax.swing.JLabel lbl_descripcionmaterial;
    private javax.swing.JLabel lbl_devolucion;
    private javax.swing.JLabel lbl_direccionfiscal;
    private javax.swing.JLabel lbl_encabezadoalmacen2;
    protected static javax.swing.JLabel lbl_foto;
    private javax.swing.JLabel lbl_imagentimaca2;
    private javax.swing.JLabel lbl_motivo;
    private javax.swing.JLabel lbl_nombres;
    private javax.swing.JLabel lbl_ordencompra;
    private javax.swing.JLabel lbl_personacontacto;
    private javax.swing.JLabel lbl_proveedor;
    private javax.swing.JLabel lbl_rif;
    private javax.swing.JLabel lbl_tipo;
    private javax.swing.JLabel lbl_umb;
    private javax.swing.JLabel lbl_umbpendiente;
    private javax.swing.JLabel lbl_umbreingreso;
    protected static javax.swing.JLabel lbl_usuario;
    private javax.swing.JPanel panel_devolucion;
    private javax.swing.JPanel panel_foto;
    private javax.swing.JPanel panel_proveedor;
    private javax.swing.JTable tabla_devolucion;
    private javax.swing.JTextField txt_cantidad;
    private javax.swing.JTextField txt_ordencompra;
    // End of variables declaration//GEN-END:variables
}
